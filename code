#include <stdio.h>
#include <string.h>

#define MAX_TUTORS 100
#define MAX_NAME_LENGTH 50
#define MAX_SUBJECT_LENGTH 30

struct Tutor {
    char name[MAX_NAME_LENGTH];
    char subject[MAX_SUBJECT_LENGTH];
    float hourly_rate;
    int available;
    char studentName[MAX_NAME_LENGTH];
};

void readTutorsData(struct Tutor tutors[], int *numTutors) {
    FILE *file = fopen("teachers_database.txt", "r");
    if (file == NULL) {
        printf("Помилка відкриття файлу.\n");
        return;
    }

    while (*numTutors < MAX_TUTORS && fscanf(file, "%[^,],%[^,],%f,%d,%[^\n]\n", tutors[*numTutors].name, tutors[*numTutors].subject, &tutors[*numTutors].hourly_rate, &tutors[*numTutors].available, tutors[*numTutors].studentName) == 5) {
        (*numTutors)++;
    }

    fclose(file);
}

void displayAvailableTutors(struct Tutor tutors[], int numTutors, const char *subject) {
    printf("\nДоступні викладачі для предмету '%s':\n", subject);
    printf("-------------------------------------------------------\n");
    printf("%-20s%-20s%-15s%-15s\n", "Ім'я", "Предмет", "Ціна за заняття", "Доступність");
    printf("-------------------------------------------------------\n");

    int availableTutors = 0;
    for (int i = 0; i < numTutors; i++) {
        if (tutors[i].available && strcmp(tutors[i].subject, subject) == 0) {
            printf("%-20s%-20s%-15.2f%-15s\n", tutors[i].name, tutors[i].subject, tutors[i].hourly_rate, "Доступний");
            availableTutors++;
        }
    }

    if (availableTutors == 0) {
        printf("Немає доступних викладачів для даного предмету.\n");
    }

    printf("-------------------------------------------------------\n");
}
